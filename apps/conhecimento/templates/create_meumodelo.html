{% extends 'base.html' %}

{% block page_title %}
  Novo Tópico
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-xl-12 col-sm-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Novo Tópico</h5>
          <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}  <!-- Renderiza o formulário, incluindo o CKEditor no campo 'texto' -->
            <button type="submit" class="btn btn-success">Criar</button>
            <a href="{% url 'index' %}" class="btn btn-secondary">Cancelar</a>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.ckeditor.com/ckeditor5/36.0.1/classic/ckeditor.js"></script>
<script>
    // Aplicar o CKEditor ao campo 'texto'
    ClassicEditor
        .create(document.querySelector('#id_texto'), {  // O ID do campo gerado pelo Django é 'id_texto'
            toolbar: [
                'heading', '|', 'bold', 'italic', 'underline', 'strikethrough', 
                'fontColor', 'fontBackgroundColor', 'fontSize', 'fontFamily', '|', 
                'link', 'bulletedList', 'numberedList', 'blockQuote', 'insertTable', 
                'tableColumn', 'tableRow', 'mergeTableCells', '|', 'undo', 'redo', 
                'alignment', 'imageUpload', 'mediaEmbed', 'horizontalLine', 'specialCharacters'
            ]
        })
        .catch(error => {
            console.error(error);
        });
</script>
{% endblock %}
